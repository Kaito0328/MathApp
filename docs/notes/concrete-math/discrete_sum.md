# 離散差分と離散和（Δ と Σ）

## 背景知識
離散微積分では Δf(n)=f(n+1)−f(n), Σf はその逆操作である。多項式に対しては次数が 1 つ上下する。

## 入力例と出力例
- 入力: 多項式 p(x)。
- 出力: Δp(x) または Σp(x)。

## アルゴリズム
- discrete_diff(p):
	- p(x)=∑ a_i x^i とすると p(x+1)=∑ a_i ∑_{j=0..i} C(i,j) x^j。差を取り、係数をまとめる。
	- 実装: i を外側、j を内側に二重ループで係数を更新（O(n^2)）。
	- 代替: falling 基底に変換すれば Δ は係数のシフトになるため O(n) で計算可能（基底変換が O(n^2)）。
- discrete_sum(p):
	- q=Σp を f(−1)=0 の規約で一意に取り、Δq=p を満たす q を構成する。
	- falling 基底を用いると、Δ(x)_m = m·(x)_{m−1} より係数を積分のように割って上げる操作で q を得られる。
	- 実装手順（標準基底のまま）: 未知係数 b_j の多項式 q(x)=∑ b_j x^j を仮定し、Δq=p の係数比較から b を後退代入で解く（上三角）。
	- 計算量: O(n^2)。

数値・境界:
- 定数項のみの p に対し q は一次（q(−1)=0 で定まる）。
- 複素係数では conj ペアが崩れないよう丸めに閾値を設ける。
