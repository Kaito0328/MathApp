# 行列（リング演算）

## 背景知識
行列は要素型が環であれば加減・スカラー倍・積が定義できる。本クレートは行・列の基本操作やブロック操作も提供する。

## 入力例と出力例
- 入力: 次元 (rows, cols) とデータ。
- 出力: 新しい行列，または演算結果。

## アルゴリズム
- 構成: zeros/identity/form_diag。
	- identity(n) は対角に単位元、それ以外に零元を配置する。
- スカラー演算: add/sub/mul/neg は要素ごとに適用し、サイズ一致を検証する。
- 行列積 C=A·B（A: n×k, B: k×m）:
	- 朴素法: 3重ループで C[i,j]+=A[i,t]·B[t,j]。ループ順は `i-j-t` または `i-t-j` を採用してキャッシュ局所性を改善する。
	- ベクトル乗算 mul_vector は B を長さ k の列ベクトルとみなし同様に計算する。
	- ブロック化（大規模向け）: タイルサイズ T を決め B と A を T×T ブロックに分割し、ブロック積でキャッシュヒット率を上げる。
- 行・列操作: scale_row/scale_col、row_add(dst, src, α) で R_dst ← R_dst + αR_src。トレースは正方であることを確認して対角和を返す。
- ブロック: submatrix/set_submatrix で矩形領域を抽出/代入。hstack/vstack はサイズ整合を検査して連結する。

境界条件と注意:
- サイズ不一致や非正方でトレース/対角要求が来た場合はエラーとする。
- 要素型が環である前提のため、除算は定義しない（体機能は matrix_field を参照）。

### 計算量と制約
- 乗算は O(n·m·k)。ブロック化で定数因子を削減可能。その他はサイズに線形。
- サイズ不一致や非正方条件はエラー。
